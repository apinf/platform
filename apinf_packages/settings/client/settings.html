<!-- Copyright 2017 Apinf Oy
This file is covered by the EUPL license.
You may obtain a copy of the licence at
https://joinup.ec.europa.eu/community/eupl/og_page/european-union-public-licence-eupl-v11 -->

<template name="settings">
  <div class="container padded-container">
    <div class="row">
      {{> settingsMenu }}

      {{# autoForm
        collection=settingsCollection
        doc=editDoc
        id="settings"
        type=formType }}
      <div class="col-md-6 settings-fields">
        <div class="panel panel-default">
          <div class="panel-heading">
            <span class="panel-title">
              {{_ "settings_panelTitle_addingApisAndOrganizations" }}
            </span>
          </div>
          <div class="panel-body">
            {{> afQuickField name='access.onlyAdminsCanAddApis' id="addapi-adminonly" }}
            {{> afQuickField name='access.onlyAdminsCanAddOrganizations' id="addorganization-adminonly" }}
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <span class="panel-title">
              {{_ "settings_development_features" }}
            </span>
            <span class="pull-right">
              {{> afQuickField name='developmentFeatures' id="development-features" }}
            </span>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
              <span class="panel-title">
                {{_ "settings_sdkCode_generator" }}
              </span>
              <span class="pull-right">
                {{> afQuickField name='sdkCodeGenerator.enabled' id="SDK-code-generator" }}
              </span>
          </div>
          <div class="panel-body">
            {{# if afFieldValueIs name="sdkCodeGenerator.enabled" value=true }}
              {{> afQuickField name='sdkCodeGenerator.host' id="SDK-host" }}
            {{/ if }}
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <span class="panel-title">
              {{_ "settings_mail" }}
            </span>
            <span class="pull-right">
              {{> afQuickField name='mail.enabled' id="email" }}
            </span>
          </div>
          <div class="panel-body">
            {{# if afFieldValueIs name='mail.enabled' value=true }}
              {{> afQuickField name='mail.username' id="email-username" }}
              {{> afQuickField name='mail.password' type="password" id="email-password" }}
              {{> afQuickField name='mail.smtpHost' id="email-host" }}
              {{> afQuickField name='mail.smtpPort' id="email-port" }}
              <a  tabindex="0"
                  role="button"
                  data-toggle="popover"
                  data-placement="left"
                  data-trigger="focus"
                  data-content="{{_ 'settings_mail_fromEmail' }}">
                <i class="fa fa-question-circle" aria-hidden="true"></i>
              </a>
              {{> afQuickField name='mail.fromEmail' id="email-send" }}
              <a  tabindex="0"
                  role="button"
                  data-toggle="popover"
                  data-placement="left"
                  data-trigger="focus"
                  data-content="{{_ 'settings_mail_toEmail' }}">
                <i class="fa fa-question-circle" aria-hidden="true"></i>
              </a>
              {{> afQuickField name='mail.toEmail' id="email-recieve" }}
            {{/ if }}
          </div>
        </div>
        <!-- This is taken in use after the Next is merged -->
        <div class="panel panel-default">
          <div class="panel-heading">
            <span class="panel-title">
              {{_ "settings_disabled_login_methods" }}
            </span>
          </div>
          <div class="panel-body">
            {{> afQuickField name='loginMethods.fiware' id="fiware-login" }}
            {{> afQuickField name='loginMethods.github' id="github-login" }}
            {{> afQuickField name='loginMethods.hsl_id' id="hsl-login" }}
          </div>
        </div>
        <div id="form-buttons">
          <button
            type="submit"
            class="btn btn-lg btn-success"
            id="save-settings">
            {{_ "settings_save" }}
          </button>
        </div>
      </div>
      {{/ autoForm }}
    </div>
  </div>
</template>
