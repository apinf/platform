<!-- Copyright 2017 Apinf Oy
This file is covered by the EUPL license.
You may obtain a copy of the licence at
https://joinup.ec.europa.eu/community/eupl/og_page/european-union-public-licence-eupl-v11 -->

<template name="apiMonitoring">
  <a
  tabindex="0"
  class="pull-right"
  role="button"
  data-toggle="popover"
  data-placement="left"
  data-trigger="focus"
  data-content="{{_ "apiMonitoring_helpIcon_text" }}">
  <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
  </a>
  <h2 style="font-size:16px;margin-top:0;">
    {{_ "apiMonitoring_panelTitle_Monitoring" }}
  </h2>

  {{# autoForm collection=monitoringCollection id="apiMonitoringForm" type=formType doc=apiMonitoringSettings }}
    <!-- hidden field, auto-value -->
    {{> afQuickField name='apiId' value=api._id type="hidden" }}

    {{> afQuickField name='enabled' }}

    {{#if afFieldValueIs name='enabled' value=true }}
      <label for="endpoint-monitor-field">
        {{ afFieldLabelText name='url' }}
        &nbsp;
      </label>
      <div class="form-group">
            {{> afFieldInput name='url' }}
      </div>
    {{/if}}
    <div class="form-group">
      <button type="submit" class="btn btn-success" id="save-monitoring-settings">
        {{_ "apiMonitoring_saveButton_text" }}
      </button>
    </div>
  {{/autoForm}}
</template>
