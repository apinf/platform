<!-- Copyright 2017 Apinf Oy
This file is covered by the EUPL license.
You may obtain a copy of the licence at
https://joinup.ec.europa.eu/community/eupl/og_page/european-union-public-licence-eupl-v11 -->

<template name="addApiBySwagger">
  {{# if Template.subscriptionsReady }}
      <div class="modal fade">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <i class="fa fa-times" aria-hidden="true"></i>
              </button>
              <h1 class="modal-title">
                {{_ "manageApiDocumentationModal_Title" }}
              </h1>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="selectOption">Select</label>
                <select class="form-control" id="selectOption">
                  <option value="file">File</option>
                  <option value="url">Url</option>
                </select>
              </div>
              {{# autoForm collection=ApisCollection id="addApiBySwaggerForm" type="insert" }}
                {{# if optionFile }}
                  <div class="form-group">
                    <div class="documentation-file">
                      {{# unless documentationFile }}
                        {{> manageApiDocumentationModalUploadButton }}
                      {{ else }}
                        <ul class="list-group">
                          <li class="list-group-item">
                            <i class="fa fa-file-text-o" aria-hidden="true"></i>
                            {{ documentationFile.filename }}
                            <span class="pull-right">
                              <button type="button" class="btn btn-xs btn-danger delete-documentation" id="delete-documentation">
                                <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i>
                              </button>
                            </span>
                          </li>
                        </ul>
                      {{/ unless }}
                    </div>
                  </div>
                {{ else }}
                  <div class="form-group">
                    <label for="url">Remote Url</label>
                    <input type="text" class="form-control" name='url' id="url" placeholder="Remote URL" required>
                  </div>
                {{/ if }}
                <!--invisible auto-value field-->
                {{> afQuickField name='latestMonitoringStatusCode' value="-1" type="hidden" }}
                <input type="hidden" name="apiDocId" id="apiDocId" value={{docId}}>
                <fieldset>
                  {{> afQuickField type="hidden" name='name' id="api-name" value=apiData.name disabled=shouldBeDisabled }}
                  {{> afQuickField type="hidden" name='description' rows=2 id="api-description" value=apiData.desc disabled=shouldBeDisabled }}
                  {{> afQuickField type="hidden" name='url' id="api-url" value=apiData.url disabled=shouldBeDisabled }}
                  {{> afQuickField name='lifecycleStatus' id="api-lifecyclestatus" }}
                </fieldset>
                <button type="submit" class="btn btn-primary" id="submitApiBySwagger-button" disabled>
                  {{_ 'addApi_button_text' }}
                </button>
                <button type="button" class="btn btn-reset" data-dismiss="modal" aria-label="Close">
                  Cancel
                </button>
              {{/ autoForm }}
            </div>
            {{# if spinnerEnabled }}
              {{> spinner }}
            {{/ if }}
          </div>
        </div>
      </div>
  {{ else }}
    {{> spinner }}
  {{/ if }}
</template>
