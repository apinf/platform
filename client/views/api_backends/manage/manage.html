<template name='manageApiBackends'>
  <h1 class="page-heading">{{_ "manage_ApiBackends_Title"}}</h1>
  {{# each managedApis }}
  <div class="panel panel-default managed-apis">
    <div class="panel-heading">
      <h2 class="panel-title">
        {{ name }}
        <div class="btn-group pull-right">
          <a
             href="{{ pathFor route='viewApiBackend' }}"
             class="btn btn-success">
            {{_ "manage_ApiBackends_View"}}
          </a>
          <a
             href="{{ pathFor route='editApiBackend' }}"
             class="btn btn-warning">
            {{_ "manage_ApiBackends_Edit"}}
          </a>
          <a
             href="#"
             class="btn btn-danger"
             id="deleteModal">
            {{_ "manageApiBackends_deleteButton"}}
          </a>
        </div>
        <div class="clearfix"></div>
      </h2>
    </div>
    <div class="panel-body">
      <div class="col-md-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <a
               data-toggle="collapse"
               data-target="#api-id-{{ _id }}-backend"
               class="api-panel-title">
              <h3 class="panel-title">
                {{ backend_host }} ({{ backend_protocol }})
              </h3>
            </a>
          </div><!-- /.panel-heading -->
          <div id="api-id-{{ _id }}-backend" class="panel-body collapse">
            <h4>Servers</h4>
            <ul class="list-group">
              {{# each servers }}
              <li class="list-group-item">{{ host }} : {{ port }}</li>
              {{/ each }}
            </ul>
          </div><!-- /.panel-body -->
        </div><!-- /.panel -->
      </div>
      <div class="col-md-4 arrow text-center">
        <i class="fa fa-arrow-right fa-2x"></i>
        <span>{{_ "manage_ApiBackends_Rewrite"}}</span>
      </div>
      <div class="col-md-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <a
               data-toggle="collapse"
               data-target="#api-id-{{ _id }}-frontend"
               class="api-panel-title">
              <h3 class="panel-title">
                {{ frontend_host }}
              </h3>
            </a>
          </div><!-- /.panel-heading -->
          <div id="api-id-{{ _id }}-frontend" class="panel-body collapse">
            <h4>{{_ "manage_ApiBackends_Matches"}}</h4>
            <ul class="list-group">
              {{# each url_matches }}
              <li class="list-group-item">
                <span>{{_ "manage_ApiBackends_Backend"}} {{ backend_prefix }}</span><br />
                <span>{{_ "manage_ApiBackends_Frontend"}} {{ frontend_prefix }}</span>
              </li>
              {{/ each }}
            </ul>
          </div><!-- /.panel-body -->
        </div><!-- /.panel -->
      </div>
    </div>
  </div>
  {{/ each }}
</template>
