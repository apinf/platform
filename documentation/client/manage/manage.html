<template name="manageApiDocumentationModal">
  <div class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <i class="fa fa-times" aria-hidden="true"></i>
          </button>
          <h1 class="modal-title">
            {{_ "manageApiDocumentationModal_Title" }}
          </h1>
        </div>
        <div class="modal-body">
          {{# autoForm
            collection=apisCollection
            doc=api
            id="apiDocumentationForm"
            type="update" }}

            <legend>
              {{> showHelp 'uploadApiDocumentation' }}
              {{_ "import_ApiDocumentation_Title" }}
            </legend>
            {{> afQuickField
              name="documentationType"
              options="allowed"
              firstOption=false
            }}
            {{#if afFieldValueIs
              name="documentationType"
              value="file"
            }}
            <div class="documentation-file">
              {{# unless documentationFile }}
                {{> manageApiDocumentationModalUploadButton }}
              {{ else }}
                <ul class="list-group">
                  <li class="list-group-item">
                    <i class="fa fa-file-text-o" aria-hidden="true"></i>
                    {{ documentationFile.filename }}
                    <span class="pull-right">
                    <button type="button" class="btn btn-xs btn-danger delete-documentation">
                      <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i>
                    </button>
                  </span>
                  </li>
                </ul>
                {{> afQuickField
                    name="submit_methods"
                    options=supportedSubmitMethods
                    type="select-checkbox-inline"
                    noselect=false
                }}
              {{/ unless }}
            </div>
            {{ else }}
            {{> afQuickField name='documentationUrl' }}
            {{/ if }}
            {{# if apiDocumentationEditorIsEnabled }}
              <legend>
                {{> showHelp 'documentation_editor_create_file' }}
                {{_ "manageApiDocumentationModal_CreateDocumentation_Title" }}
              </legend>
              <a id="open-api-editor" class="btn btn-primary" href="/documentation/editor">
                {{_ "manageApiDocumentationModal_openDocumentationEditor" }}
              </a>
            {{/ if }}
            <legend>
              {{> showHelp 'documentation_link' }}
              {{_ "manageApiDocumentationModal_DocumentationLink_Title" }}
            </legend>
            {{> afQuickField name='otherDocumentationUrl' }}
            <button type="submit" class="btn btn-success" id="save-documentation-link">
              {{_ "manageApiDocumentationModal_CreateDocumentation_SaveButton" }}
            </button>
            <button type="button" class="btn btn-default" data-dismiss="modal">
              {{_ "manageApiDocumentationModal_CreateDocumentation_CancelButton" }}
            </button>
            {{# if spinnerEnabled }}
              {{> spinner }}
            {{/ if }}
          {{/ autoForm }}
        </div>
      </div>
    </div>
  </div>
</template>
